[
  {
    "objectID": "ST558_Pr1_Report.html",
    "href": "ST558_Pr1_Report.html",
    "title": "Modifying & Processing Census Data",
    "section": "",
    "text": "library(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\n\nStart by reading in the desired data\n\n\ncensus_county &lt;-\n  read_csv(\"https://www4.stat.ncsu.edu/~online/datasets/EDU01a.csv\")\n\nRows: 3198 Columns: 42\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (22): Area_name, STCOU, EDU010187N1, EDU010187N2, EDU010188N1, EDU010188...\ndbl (20): EDU010187F, EDU010187D, EDU010188F, EDU010188D, EDU010189F, EDU010...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nhead(census_county)\n\n# A tibble: 6 × 42\n  Area_name     STCOU EDU010187F EDU010187D EDU010187N1 EDU010187N2 EDU010188F\n  &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;\n1 UNITED STATES 00000          0   40024299 0000        0000                 0\n2 ALABAMA       01000          0     733735 0000        0000                 0\n3 Autauga, AL   01001          0       6829 0000        0000                 0\n4 Baldwin, AL   01003          0      16417 0000        0000                 0\n5 Barbour, AL   01005          0       5071 0000        0000                 0\n6 Bibb, AL      01007          0       3557 0000        0000                 0\n# ℹ 35 more variables: EDU010188D &lt;dbl&gt;, EDU010188N1 &lt;chr&gt;, EDU010188N2 &lt;chr&gt;,\n#   EDU010189F &lt;dbl&gt;, EDU010189D &lt;dbl&gt;, EDU010189N1 &lt;chr&gt;, EDU010189N2 &lt;chr&gt;,\n#   EDU010190F &lt;dbl&gt;, EDU010190D &lt;dbl&gt;, EDU010190N1 &lt;chr&gt;, EDU010190N2 &lt;chr&gt;,\n#   EDU010191F &lt;dbl&gt;, EDU010191D &lt;dbl&gt;, EDU010191N1 &lt;chr&gt;, EDU010191N2 &lt;chr&gt;,\n#   EDU010192F &lt;dbl&gt;, EDU010192D &lt;dbl&gt;, EDU010192N1 &lt;chr&gt;, EDU010192N2 &lt;chr&gt;,\n#   EDU010193F &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010193N1 &lt;chr&gt;, EDU010193N2 &lt;chr&gt;,\n#   EDU010194F &lt;dbl&gt;, EDU010194D &lt;dbl&gt;, EDU010194N1 &lt;chr&gt;, EDU010194N2 &lt;chr&gt;, …\n\n\n\nSelect the specific data in question, i.e. “Area Name”, STCOU, and variables ending in “D”. The “ends_with()” function, which is part of the {tidyselect} package can be used within the select function to identify those columns which end in “D”.\n\n\ncensus_select &lt;- census_county |&gt; \n  select(area_name=Area_name, STCOU, ends_with(\"D\"))\n\ncensus_select\n\n# A tibble: 3,198 × 12\n   area_name     STCOU EDU010187D EDU010188D EDU010189D EDU010190D EDU010191D\n   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;\n 1 UNITED STATES 00000   40024299   39967624   40317775   40737600   41385442\n 2 ALABAMA       01000     733735     728234     730048     728252     725541\n 3 Autauga, AL   01001       6829       6900       6920       6847       7008\n 4 Baldwin, AL   01003      16417      16465      16799      17054      17479\n 5 Barbour, AL   01005       5071       5098       5068       5156       5173\n 6 Bibb, AL      01007       3557       3508       3571       3621       3652\n 7 Blount, AL    01009       7319       7223       7205       7209       7155\n 8 Bullock, AL   01011       2014       1980       1985       1983       1985\n 9 Butler, AL    01013       4640       4582       4610       4591       4544\n10 Calhoun, AL   01015      20939      20923      20907      20849      20768\n# ℹ 3,188 more rows\n# ℹ 5 more variables: EDU010192D &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010194D &lt;dbl&gt;,\n#   EDU010195D &lt;dbl&gt;, EDU010196D &lt;dbl&gt;\n\n\n\nConvert data to long format.\n\n\ncensus_long &lt;- census_select |&gt;\n  pivot_longer(cols = ends_with(\"D\"), \n               names_to = \"enrollment\", \n               values_to = \"value\")\n\ncensus_long\n\n# A tibble: 31,980 × 4\n   area_name     STCOU enrollment    value\n   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;\n 1 UNITED STATES 00000 EDU010187D 40024299\n 2 UNITED STATES 00000 EDU010188D 39967624\n 3 UNITED STATES 00000 EDU010189D 40317775\n 4 UNITED STATES 00000 EDU010190D 40737600\n 5 UNITED STATES 00000 EDU010191D 41385442\n 6 UNITED STATES 00000 EDU010192D 42088151\n 7 UNITED STATES 00000 EDU010193D 42724710\n 8 UNITED STATES 00000 EDU010194D 43369917\n 9 UNITED STATES 00000 EDU010195D 43993459\n10 UNITED STATES 00000 EDU010196D 44715737\n# ℹ 31,970 more rows\n\n\n\nCreate new columns for year and measurement from enrollment column\n\n\ncensus_final &lt;- census_long |&gt;\nmutate(\n    year = as.numeric(paste0(\"19\", substr(enrollment, nchar(enrollment) - 2, nchar(enrollment) - 1))),\n    measurement = substr(enrollment, 1, nchar(enrollment) - 3)\n    )|&gt;\nselect(area_name, STCOU, year, measurement, value)\n\ncensus_final\n\n# A tibble: 31,980 × 5\n   area_name     STCOU  year measurement    value\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;\n 1 UNITED STATES 00000  1987 EDU0101     40024299\n 2 UNITED STATES 00000  1988 EDU0101     39967624\n 3 UNITED STATES 00000  1989 EDU0101     40317775\n 4 UNITED STATES 00000  1990 EDU0101     40737600\n 5 UNITED STATES 00000  1991 EDU0101     41385442\n 6 UNITED STATES 00000  1992 EDU0101     42088151\n 7 UNITED STATES 00000  1993 EDU0101     42724710\n 8 UNITED STATES 00000  1994 EDU0101     43369917\n 9 UNITED STATES 00000  1995 EDU0101     43993459\n10 UNITED STATES 00000  1996 EDU0101     44715737\n# ℹ 31,970 more rows\n\n\n\nCreate two datasets, one for county level data and one for non-county level data; then create classes for each dataset\n\n\ncounty_indices &lt;- grep(pattern = \", \\\\w\\\\w\", census_final$area_name)\ncounty_data &lt;- census_final[county_indices, ]\nclass(county_data) &lt;- c(\"county\", class(county_data))\n\ncounty_data\n\n# A tibble: 31,450 × 5\n   area_name   STCOU  year measurement value\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;\n 1 Autauga, AL 01001  1987 EDU0101      6829\n 2 Autauga, AL 01001  1988 EDU0101      6900\n 3 Autauga, AL 01001  1989 EDU0101      6920\n 4 Autauga, AL 01001  1990 EDU0101      6847\n 5 Autauga, AL 01001  1991 EDU0101      7008\n 6 Autauga, AL 01001  1992 EDU0101      7137\n 7 Autauga, AL 01001  1993 EDU0101      7152\n 8 Autauga, AL 01001  1994 EDU0101      7381\n 9 Autauga, AL 01001  1995 EDU0101      7568\n10 Autauga, AL 01001  1996 EDU0101      7834\n# ℹ 31,440 more rows\n\n\n\nnon_county_data &lt;- census_final[-county_indices, ]\nclass(non_county_data) &lt;- c(\"state\", class(non_county_data))\n\nnon_county_data\n\n# A tibble: 530 × 5\n   area_name     STCOU  year measurement    value\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;\n 1 UNITED STATES 00000  1987 EDU0101     40024299\n 2 UNITED STATES 00000  1988 EDU0101     39967624\n 3 UNITED STATES 00000  1989 EDU0101     40317775\n 4 UNITED STATES 00000  1990 EDU0101     40737600\n 5 UNITED STATES 00000  1991 EDU0101     41385442\n 6 UNITED STATES 00000  1992 EDU0101     42088151\n 7 UNITED STATES 00000  1993 EDU0101     42724710\n 8 UNITED STATES 00000  1994 EDU0101     43369917\n 9 UNITED STATES 00000  1995 EDU0101     43993459\n10 UNITED STATES 00000  1996 EDU0101     44715737\n# ℹ 520 more rows\n\n\n\nIn the county dataset, create a new variable for state.\n\n\ncounty_data &lt;- county_data |&gt;\n  mutate(state = substr(area_name, nchar(area_name) - 2, nchar(area_name)))\n\ncounty_data\n\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement value state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1987 EDU0101      6829 \" AL\"\n 2 Autauga, AL 01001  1988 EDU0101      6900 \" AL\"\n 3 Autauga, AL 01001  1989 EDU0101      6920 \" AL\"\n 4 Autauga, AL 01001  1990 EDU0101      6847 \" AL\"\n 5 Autauga, AL 01001  1991 EDU0101      7008 \" AL\"\n 6 Autauga, AL 01001  1992 EDU0101      7137 \" AL\"\n 7 Autauga, AL 01001  1993 EDU0101      7152 \" AL\"\n 8 Autauga, AL 01001  1994 EDU0101      7381 \" AL\"\n 9 Autauga, AL 01001  1995 EDU0101      7568 \" AL\"\n10 Autauga, AL 01001  1996 EDU0101      7834 \" AL\"\n# ℹ 31,440 more rows\n\n\n\nFor non-county level data, create new column for divisions.\n\n\ndivisions &lt;- c(\n    'ALABAMA' = 'Division 6',\n    'ALASKA' = 'Division 9',\n    'ARIZONA' = 'Division 8',\n    'ARKANSAS' = 'Division 7',\n    'CALIFORNIA' = 'Division 9',\n    'COLORADO' = 'Division 8',\n    'CONNECTICUT' = 'Division 1',\n    'DELAWARE' = 'Division 5',\n    'FLORIDA' = 'Division 5',\n    'GEORGIA' = 'Division 5',\n    'HAWAII' = 'Division 9',\n    'IDAHO' = 'Division 8',\n    'ILLINOIS' = 'Division 3',\n    'INDIANA' = 'Division 3',\n    'IOWA' = 'Division 4',\n    'KANSAS' = 'Division 4',\n    'KENTUCKY' = 'Division 6',\n    'LOUISIANA' = 'Division 7',\n    'MAINE' = 'Division 1',\n    'MARYLAND' = 'Division 5',\n    'MASSACHUSETTS' = 'Division 1',\n    'MICHIGAN' = 'Division 3',\n    'MINNESOTA' = 'Division 4',\n    'MISSISSIPPI' = 'Division 6',\n    'MISSOURI' = 'Division 4',\n    'MONTANA' = 'Division 8',\n    'NEBRASKA' = 'Division 4',\n    'NEVADA' = 'Division 8',\n    'NEW HAMPSHIRE' = 'Division 1',\n    'NEW JERSEY' = 'Division 2',\n    'NEW MEXICO' = 'Division 8',\n    'NEW YORK' = 'Division 2',\n    'NORTH CAROLINA' = 'Division 5',\n    'NORTH DAKOTA' = 'Division 4',\n    'OHIO' = 'Division 3',\n    'OKLAHOMA' = 'Division 7',\n    'OREGON' = 'Division 9',\n    'PENNSYLVANIA' = 'Division 2',\n    'RHODE ISLAND' = 'Division 1',\n    'SOUTH CAROLINA' = 'Division 5',\n    'SOUTH DAKOTA' = 'Division 4',\n    'TENNESSEE' = 'Division 6',\n    'TEXAS' = 'Division 7',\n    'UTAH' = 'Division 8',\n    'VERMONT' = 'Division 1',\n    'VIRGINIA' = 'Division 5',\n    'WASHINGTON' = 'Division 9',\n    'WEST VIRGINIA' = 'Division 5',\n    'WISCONSIN' = 'Division 3',\n    'WYOMING' = 'Division 8'\n)\n\nnon_county_data &lt;- non_county_data |&gt;\n  mutate(division = ifelse(area_name %in% names(divisions), \n                           divisions[area_name], 'ERROR'))\n\nnon_county_data\n\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement    value division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1987 EDU0101     40024299 ERROR   \n 2 UNITED STATES 00000  1988 EDU0101     39967624 ERROR   \n 3 UNITED STATES 00000  1989 EDU0101     40317775 ERROR   \n 4 UNITED STATES 00000  1990 EDU0101     40737600 ERROR   \n 5 UNITED STATES 00000  1991 EDU0101     41385442 ERROR   \n 6 UNITED STATES 00000  1992 EDU0101     42088151 ERROR   \n 7 UNITED STATES 00000  1993 EDU0101     42724710 ERROR   \n 8 UNITED STATES 00000  1994 EDU0101     43369917 ERROR   \n 9 UNITED STATES 00000  1995 EDU0101     43993459 ERROR   \n10 UNITED STATES 00000  1996 EDU0101     44715737 ERROR   \n# ℹ 520 more rows"
  },
  {
    "objectID": "ST558_Pr1_Report.html#data-processing",
    "href": "ST558_Pr1_Report.html#data-processing",
    "title": "Modifying & Processing Census Data",
    "section": "",
    "text": "library(tidyverse)\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors\n\n\n\nStart by reading in the desired data\n\n\ncensus_county &lt;-\n  read_csv(\"https://www4.stat.ncsu.edu/~online/datasets/EDU01a.csv\")\n\nRows: 3198 Columns: 42\n── Column specification ────────────────────────────────────────────────────────\nDelimiter: \",\"\nchr (22): Area_name, STCOU, EDU010187N1, EDU010187N2, EDU010188N1, EDU010188...\ndbl (20): EDU010187F, EDU010187D, EDU010188F, EDU010188D, EDU010189F, EDU010...\n\nℹ Use `spec()` to retrieve the full column specification for this data.\nℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.\n\nhead(census_county)\n\n# A tibble: 6 × 42\n  Area_name     STCOU EDU010187F EDU010187D EDU010187N1 EDU010187N2 EDU010188F\n  &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;\n1 UNITED STATES 00000          0   40024299 0000        0000                 0\n2 ALABAMA       01000          0     733735 0000        0000                 0\n3 Autauga, AL   01001          0       6829 0000        0000                 0\n4 Baldwin, AL   01003          0      16417 0000        0000                 0\n5 Barbour, AL   01005          0       5071 0000        0000                 0\n6 Bibb, AL      01007          0       3557 0000        0000                 0\n# ℹ 35 more variables: EDU010188D &lt;dbl&gt;, EDU010188N1 &lt;chr&gt;, EDU010188N2 &lt;chr&gt;,\n#   EDU010189F &lt;dbl&gt;, EDU010189D &lt;dbl&gt;, EDU010189N1 &lt;chr&gt;, EDU010189N2 &lt;chr&gt;,\n#   EDU010190F &lt;dbl&gt;, EDU010190D &lt;dbl&gt;, EDU010190N1 &lt;chr&gt;, EDU010190N2 &lt;chr&gt;,\n#   EDU010191F &lt;dbl&gt;, EDU010191D &lt;dbl&gt;, EDU010191N1 &lt;chr&gt;, EDU010191N2 &lt;chr&gt;,\n#   EDU010192F &lt;dbl&gt;, EDU010192D &lt;dbl&gt;, EDU010192N1 &lt;chr&gt;, EDU010192N2 &lt;chr&gt;,\n#   EDU010193F &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010193N1 &lt;chr&gt;, EDU010193N2 &lt;chr&gt;,\n#   EDU010194F &lt;dbl&gt;, EDU010194D &lt;dbl&gt;, EDU010194N1 &lt;chr&gt;, EDU010194N2 &lt;chr&gt;, …\n\n\n\nSelect the specific data in question, i.e. “Area Name”, STCOU, and variables ending in “D”. The “ends_with()” function, which is part of the {tidyselect} package can be used within the select function to identify those columns which end in “D”.\n\n\ncensus_select &lt;- census_county |&gt; \n  select(area_name=Area_name, STCOU, ends_with(\"D\"))\n\ncensus_select\n\n# A tibble: 3,198 × 12\n   area_name     STCOU EDU010187D EDU010188D EDU010189D EDU010190D EDU010191D\n   &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;\n 1 UNITED STATES 00000   40024299   39967624   40317775   40737600   41385442\n 2 ALABAMA       01000     733735     728234     730048     728252     725541\n 3 Autauga, AL   01001       6829       6900       6920       6847       7008\n 4 Baldwin, AL   01003      16417      16465      16799      17054      17479\n 5 Barbour, AL   01005       5071       5098       5068       5156       5173\n 6 Bibb, AL      01007       3557       3508       3571       3621       3652\n 7 Blount, AL    01009       7319       7223       7205       7209       7155\n 8 Bullock, AL   01011       2014       1980       1985       1983       1985\n 9 Butler, AL    01013       4640       4582       4610       4591       4544\n10 Calhoun, AL   01015      20939      20923      20907      20849      20768\n# ℹ 3,188 more rows\n# ℹ 5 more variables: EDU010192D &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010194D &lt;dbl&gt;,\n#   EDU010195D &lt;dbl&gt;, EDU010196D &lt;dbl&gt;\n\n\n\nConvert data to long format.\n\n\ncensus_long &lt;- census_select |&gt;\n  pivot_longer(cols = ends_with(\"D\"), \n               names_to = \"enrollment\", \n               values_to = \"value\")\n\ncensus_long\n\n# A tibble: 31,980 × 4\n   area_name     STCOU enrollment    value\n   &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;\n 1 UNITED STATES 00000 EDU010187D 40024299\n 2 UNITED STATES 00000 EDU010188D 39967624\n 3 UNITED STATES 00000 EDU010189D 40317775\n 4 UNITED STATES 00000 EDU010190D 40737600\n 5 UNITED STATES 00000 EDU010191D 41385442\n 6 UNITED STATES 00000 EDU010192D 42088151\n 7 UNITED STATES 00000 EDU010193D 42724710\n 8 UNITED STATES 00000 EDU010194D 43369917\n 9 UNITED STATES 00000 EDU010195D 43993459\n10 UNITED STATES 00000 EDU010196D 44715737\n# ℹ 31,970 more rows\n\n\n\nCreate new columns for year and measurement from enrollment column\n\n\ncensus_final &lt;- census_long |&gt;\nmutate(\n    year = as.numeric(paste0(\"19\", substr(enrollment, nchar(enrollment) - 2, nchar(enrollment) - 1))),\n    measurement = substr(enrollment, 1, nchar(enrollment) - 3)\n    )|&gt;\nselect(area_name, STCOU, year, measurement, value)\n\ncensus_final\n\n# A tibble: 31,980 × 5\n   area_name     STCOU  year measurement    value\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;\n 1 UNITED STATES 00000  1987 EDU0101     40024299\n 2 UNITED STATES 00000  1988 EDU0101     39967624\n 3 UNITED STATES 00000  1989 EDU0101     40317775\n 4 UNITED STATES 00000  1990 EDU0101     40737600\n 5 UNITED STATES 00000  1991 EDU0101     41385442\n 6 UNITED STATES 00000  1992 EDU0101     42088151\n 7 UNITED STATES 00000  1993 EDU0101     42724710\n 8 UNITED STATES 00000  1994 EDU0101     43369917\n 9 UNITED STATES 00000  1995 EDU0101     43993459\n10 UNITED STATES 00000  1996 EDU0101     44715737\n# ℹ 31,970 more rows\n\n\n\nCreate two datasets, one for county level data and one for non-county level data; then create classes for each dataset\n\n\ncounty_indices &lt;- grep(pattern = \", \\\\w\\\\w\", census_final$area_name)\ncounty_data &lt;- census_final[county_indices, ]\nclass(county_data) &lt;- c(\"county\", class(county_data))\n\ncounty_data\n\n# A tibble: 31,450 × 5\n   area_name   STCOU  year measurement value\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;\n 1 Autauga, AL 01001  1987 EDU0101      6829\n 2 Autauga, AL 01001  1988 EDU0101      6900\n 3 Autauga, AL 01001  1989 EDU0101      6920\n 4 Autauga, AL 01001  1990 EDU0101      6847\n 5 Autauga, AL 01001  1991 EDU0101      7008\n 6 Autauga, AL 01001  1992 EDU0101      7137\n 7 Autauga, AL 01001  1993 EDU0101      7152\n 8 Autauga, AL 01001  1994 EDU0101      7381\n 9 Autauga, AL 01001  1995 EDU0101      7568\n10 Autauga, AL 01001  1996 EDU0101      7834\n# ℹ 31,440 more rows\n\n\n\nnon_county_data &lt;- census_final[-county_indices, ]\nclass(non_county_data) &lt;- c(\"state\", class(non_county_data))\n\nnon_county_data\n\n# A tibble: 530 × 5\n   area_name     STCOU  year measurement    value\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;\n 1 UNITED STATES 00000  1987 EDU0101     40024299\n 2 UNITED STATES 00000  1988 EDU0101     39967624\n 3 UNITED STATES 00000  1989 EDU0101     40317775\n 4 UNITED STATES 00000  1990 EDU0101     40737600\n 5 UNITED STATES 00000  1991 EDU0101     41385442\n 6 UNITED STATES 00000  1992 EDU0101     42088151\n 7 UNITED STATES 00000  1993 EDU0101     42724710\n 8 UNITED STATES 00000  1994 EDU0101     43369917\n 9 UNITED STATES 00000  1995 EDU0101     43993459\n10 UNITED STATES 00000  1996 EDU0101     44715737\n# ℹ 520 more rows\n\n\n\nIn the county dataset, create a new variable for state.\n\n\ncounty_data &lt;- county_data |&gt;\n  mutate(state = substr(area_name, nchar(area_name) - 2, nchar(area_name)))\n\ncounty_data\n\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement value state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1987 EDU0101      6829 \" AL\"\n 2 Autauga, AL 01001  1988 EDU0101      6900 \" AL\"\n 3 Autauga, AL 01001  1989 EDU0101      6920 \" AL\"\n 4 Autauga, AL 01001  1990 EDU0101      6847 \" AL\"\n 5 Autauga, AL 01001  1991 EDU0101      7008 \" AL\"\n 6 Autauga, AL 01001  1992 EDU0101      7137 \" AL\"\n 7 Autauga, AL 01001  1993 EDU0101      7152 \" AL\"\n 8 Autauga, AL 01001  1994 EDU0101      7381 \" AL\"\n 9 Autauga, AL 01001  1995 EDU0101      7568 \" AL\"\n10 Autauga, AL 01001  1996 EDU0101      7834 \" AL\"\n# ℹ 31,440 more rows\n\n\n\nFor non-county level data, create new column for divisions.\n\n\ndivisions &lt;- c(\n    'ALABAMA' = 'Division 6',\n    'ALASKA' = 'Division 9',\n    'ARIZONA' = 'Division 8',\n    'ARKANSAS' = 'Division 7',\n    'CALIFORNIA' = 'Division 9',\n    'COLORADO' = 'Division 8',\n    'CONNECTICUT' = 'Division 1',\n    'DELAWARE' = 'Division 5',\n    'FLORIDA' = 'Division 5',\n    'GEORGIA' = 'Division 5',\n    'HAWAII' = 'Division 9',\n    'IDAHO' = 'Division 8',\n    'ILLINOIS' = 'Division 3',\n    'INDIANA' = 'Division 3',\n    'IOWA' = 'Division 4',\n    'KANSAS' = 'Division 4',\n    'KENTUCKY' = 'Division 6',\n    'LOUISIANA' = 'Division 7',\n    'MAINE' = 'Division 1',\n    'MARYLAND' = 'Division 5',\n    'MASSACHUSETTS' = 'Division 1',\n    'MICHIGAN' = 'Division 3',\n    'MINNESOTA' = 'Division 4',\n    'MISSISSIPPI' = 'Division 6',\n    'MISSOURI' = 'Division 4',\n    'MONTANA' = 'Division 8',\n    'NEBRASKA' = 'Division 4',\n    'NEVADA' = 'Division 8',\n    'NEW HAMPSHIRE' = 'Division 1',\n    'NEW JERSEY' = 'Division 2',\n    'NEW MEXICO' = 'Division 8',\n    'NEW YORK' = 'Division 2',\n    'NORTH CAROLINA' = 'Division 5',\n    'NORTH DAKOTA' = 'Division 4',\n    'OHIO' = 'Division 3',\n    'OKLAHOMA' = 'Division 7',\n    'OREGON' = 'Division 9',\n    'PENNSYLVANIA' = 'Division 2',\n    'RHODE ISLAND' = 'Division 1',\n    'SOUTH CAROLINA' = 'Division 5',\n    'SOUTH DAKOTA' = 'Division 4',\n    'TENNESSEE' = 'Division 6',\n    'TEXAS' = 'Division 7',\n    'UTAH' = 'Division 8',\n    'VERMONT' = 'Division 1',\n    'VIRGINIA' = 'Division 5',\n    'WASHINGTON' = 'Division 9',\n    'WEST VIRGINIA' = 'Division 5',\n    'WISCONSIN' = 'Division 3',\n    'WYOMING' = 'Division 8'\n)\n\nnon_county_data &lt;- non_county_data |&gt;\n  mutate(division = ifelse(area_name %in% names(divisions), \n                           divisions[area_name], 'ERROR'))\n\nnon_county_data\n\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement    value division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1987 EDU0101     40024299 ERROR   \n 2 UNITED STATES 00000  1988 EDU0101     39967624 ERROR   \n 3 UNITED STATES 00000  1989 EDU0101     40317775 ERROR   \n 4 UNITED STATES 00000  1990 EDU0101     40737600 ERROR   \n 5 UNITED STATES 00000  1991 EDU0101     41385442 ERROR   \n 6 UNITED STATES 00000  1992 EDU0101     42088151 ERROR   \n 7 UNITED STATES 00000  1993 EDU0101     42724710 ERROR   \n 8 UNITED STATES 00000  1994 EDU0101     43369917 ERROR   \n 9 UNITED STATES 00000  1995 EDU0101     43993459 ERROR   \n10 UNITED STATES 00000  1996 EDU0101     44715737 ERROR   \n# ℹ 520 more rows"
  },
  {
    "objectID": "ST558_Pr1_Report.html#write-a-generic-function-for-summarizing",
    "href": "ST558_Pr1_Report.html#write-a-generic-function-for-summarizing",
    "title": "Modifying & Processing Census Data",
    "section": "Write a Generic Function for Summarizing",
    "text": "Write a Generic Function for Summarizing"
  },
  {
    "objectID": "ST558_Pr1_Report.html#put-it-together",
    "href": "ST558_Pr1_Report.html#put-it-together",
    "title": "Modifying & Processing Census Data",
    "section": "Put it Together",
    "text": "Put it Together"
  },
  {
    "objectID": "Task List.html",
    "href": "Task List.html",
    "title": "Project 1 Task List",
    "section": "",
    "text": "Create R Project & github repo - Charles\nRead-in the EDU01 dataset and manipulate the data as described in the project descriptions of items 1 to 6.\nRepeat the process from above with the 2nd component of the dataset using functions. Write a function for steps 1 & 2.\nWrite a function for step 3\nWrite a function for step 5\nWrite a function for step 6\nWrite the “cumulative” function, including the wrapper function and the short function to combine data\nWrite a summarizing function\nPut it Together"
  },
  {
    "objectID": "Task List.html#project-1-task-list",
    "href": "Task List.html#project-1-task-list",
    "title": "Project 1 Task List",
    "section": "",
    "text": "Create R Project & github repo - Charles\nRead-in the EDU01 dataset and manipulate the data as described in the project descriptions of items 1 to 6.\nRepeat the process from above with the 2nd component of the dataset using functions. Write a function for steps 1 & 2.\nWrite a function for step 3\nWrite a function for step 5\nWrite a function for step 6\nWrite the “cumulative” function, including the wrapper function and the short function to combine data\nWrite a summarizing function\nPut it Together"
  }
]