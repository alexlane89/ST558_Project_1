[
  {
    "objectID": "ST558_Pr1_Report.html",
    "href": "ST558_Pr1_Report.html",
    "title": "ST 558 - Project 1",
    "section": "",
    "text": "library(tidyverse)\n\n\nStart by reading in the desired data\n\n\ncensus_county &lt;-\n  read_csv(\"https://www4.stat.ncsu.edu/~online/datasets/EDU01a.csv\")\n\nhead(census_county)\n\n# A tibble: 6 × 42\n  Area_name     STCOU EDU010187F EDU010187D EDU010187N1 EDU010187N2 EDU010188F\n  &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;\n1 UNITED STATES 00000          0   40024299 0000        0000                 0\n2 ALABAMA       01000          0     733735 0000        0000                 0\n3 Autauga, AL   01001          0       6829 0000        0000                 0\n4 Baldwin, AL   01003          0      16417 0000        0000                 0\n5 Barbour, AL   01005          0       5071 0000        0000                 0\n6 Bibb, AL      01007          0       3557 0000        0000                 0\n# ℹ 35 more variables: EDU010188D &lt;dbl&gt;, EDU010188N1 &lt;chr&gt;, EDU010188N2 &lt;chr&gt;,\n#   EDU010189F &lt;dbl&gt;, EDU010189D &lt;dbl&gt;, EDU010189N1 &lt;chr&gt;, EDU010189N2 &lt;chr&gt;,\n#   EDU010190F &lt;dbl&gt;, EDU010190D &lt;dbl&gt;, EDU010190N1 &lt;chr&gt;, EDU010190N2 &lt;chr&gt;,\n#   EDU010191F &lt;dbl&gt;, EDU010191D &lt;dbl&gt;, EDU010191N1 &lt;chr&gt;, EDU010191N2 &lt;chr&gt;,\n#   EDU010192F &lt;dbl&gt;, EDU010192D &lt;dbl&gt;, EDU010192N1 &lt;chr&gt;, EDU010192N2 &lt;chr&gt;,\n#   EDU010193F &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010193N1 &lt;chr&gt;, EDU010193N2 &lt;chr&gt;,\n#   EDU010194F &lt;dbl&gt;, EDU010194D &lt;dbl&gt;, EDU010194N1 &lt;chr&gt;, EDU010194N2 &lt;chr&gt;, …\n\n\n\n\n\nSelect the specific data in question, i.e. “Area Name”, STCOU, and variables ending in “D”. The “ends_with()” function, which is part of the {tidyselect} package can be used within the select function to identify those columns which end in “D”.\n\n\ncensus_select &lt;- census_county |&gt; \n  select(area_name=Area_name, STCOU, ends_with(\"D\"))\n\nhead(census_select)\n\n# A tibble: 6 × 12\n  area_name     STCOU EDU010187D EDU010188D EDU010189D EDU010190D EDU010191D\n  &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;\n1 UNITED STATES 00000   40024299   39967624   40317775   40737600   41385442\n2 ALABAMA       01000     733735     728234     730048     728252     725541\n3 Autauga, AL   01001       6829       6900       6920       6847       7008\n4 Baldwin, AL   01003      16417      16465      16799      17054      17479\n5 Barbour, AL   01005       5071       5098       5068       5156       5173\n6 Bibb, AL      01007       3557       3508       3571       3621       3652\n# ℹ 5 more variables: EDU010192D &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010194D &lt;dbl&gt;,\n#   EDU010195D &lt;dbl&gt;, EDU010196D &lt;dbl&gt;\n\n\n\n\n\n\nConvert data to long format.\n\n\ncensus_long &lt;- census_select |&gt;\n  pivot_longer(cols = ends_with(\"D\"), \n               names_to = \"enrollment\", \n               values_to = \"value\")\n\nhead(census_long)\n\n# A tibble: 6 × 4\n  area_name     STCOU enrollment    value\n  &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;\n1 UNITED STATES 00000 EDU010187D 40024299\n2 UNITED STATES 00000 EDU010188D 39967624\n3 UNITED STATES 00000 EDU010189D 40317775\n4 UNITED STATES 00000 EDU010190D 40737600\n5 UNITED STATES 00000 EDU010191D 41385442\n6 UNITED STATES 00000 EDU010192D 42088151\n\n\n\n\n\n\nCreate new columns for year and measurement from enrollment column\n\n\ncensus_final &lt;- census_long |&gt;\nmutate(\n    year = as.numeric(paste0(\"19\", substr(enrollment, nchar(enrollment) - 2, nchar(enrollment) - 1))),\n    measurement = substr(enrollment, 1, nchar(enrollment) - 3)\n    )|&gt;\nselect(area_name, STCOU, year, measurement, value)\n\nhead(census_final)\n\n# A tibble: 6 × 5\n  area_name     STCOU  year measurement    value\n  &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;\n1 UNITED STATES 00000  1987 EDU0101     40024299\n2 UNITED STATES 00000  1988 EDU0101     39967624\n3 UNITED STATES 00000  1989 EDU0101     40317775\n4 UNITED STATES 00000  1990 EDU0101     40737600\n5 UNITED STATES 00000  1991 EDU0101     41385442\n6 UNITED STATES 00000  1992 EDU0101     42088151\n\n\n\n\n\n\nCreate two datasets, one for county level data and one for non-county level data; then create classes for each dataset\n\n\ncounty_indices &lt;- grep(pattern = \", \\\\w\\\\w\", census_final$area_name)\ncounty_data &lt;- census_final[county_indices, ]\nclass(county_data) &lt;- c(\"county\", class(county_data))\n\nhead(county_data)\n\n# A tibble: 6 × 5\n  area_name   STCOU  year measurement value\n  &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;\n1 Autauga, AL 01001  1987 EDU0101      6829\n2 Autauga, AL 01001  1988 EDU0101      6900\n3 Autauga, AL 01001  1989 EDU0101      6920\n4 Autauga, AL 01001  1990 EDU0101      6847\n5 Autauga, AL 01001  1991 EDU0101      7008\n6 Autauga, AL 01001  1992 EDU0101      7137\n\n\n\nnon_county_data &lt;- census_final[-county_indices, ]\nclass(non_county_data) &lt;- c(\"state\", class(non_county_data))\n\nhead(non_county_data)\n\n# A tibble: 6 × 5\n  area_name     STCOU  year measurement    value\n  &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;\n1 UNITED STATES 00000  1987 EDU0101     40024299\n2 UNITED STATES 00000  1988 EDU0101     39967624\n3 UNITED STATES 00000  1989 EDU0101     40317775\n4 UNITED STATES 00000  1990 EDU0101     40737600\n5 UNITED STATES 00000  1991 EDU0101     41385442\n6 UNITED STATES 00000  1992 EDU0101     42088151\n\n\n\n\n\n\nIn the county dataset, create a new variable for state.\n\n\ncounty_data &lt;- county_data |&gt;\n  mutate(state = substr(area_name, nchar(area_name) - 2, nchar(area_name)))\n\nhead(county_data)\n\n# A tibble: 6 × 6\n  area_name   STCOU  year measurement value state\n  &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n1 Autauga, AL 01001  1987 EDU0101      6829 \" AL\"\n2 Autauga, AL 01001  1988 EDU0101      6900 \" AL\"\n3 Autauga, AL 01001  1989 EDU0101      6920 \" AL\"\n4 Autauga, AL 01001  1990 EDU0101      6847 \" AL\"\n5 Autauga, AL 01001  1991 EDU0101      7008 \" AL\"\n6 Autauga, AL 01001  1992 EDU0101      7137 \" AL\"\n\n\n\n\n\n\nFor non-county level data, create new column for divisions.\n\n\ndivisions &lt;- c(\n    'ALABAMA' = 'Division 6',\n    'ALASKA' = 'Division 9',\n    'ARIZONA' = 'Division 8',\n    'ARKANSAS' = 'Division 7',\n    'CALIFORNIA' = 'Division 9',\n    'COLORADO' = 'Division 8',\n    'CONNECTICUT' = 'Division 1',\n    'DELAWARE' = 'Division 5',\n    'FLORIDA' = 'Division 5',\n    'GEORGIA' = 'Division 5',\n    'HAWAII' = 'Division 9',\n    'IDAHO' = 'Division 8',\n    'ILLINOIS' = 'Division 3',\n    'INDIANA' = 'Division 3',\n    'IOWA' = 'Division 4',\n    'KANSAS' = 'Division 4',\n    'KENTUCKY' = 'Division 6',\n    'LOUISIANA' = 'Division 7',\n    'MAINE' = 'Division 1',\n    'MARYLAND' = 'Division 5',\n    'MASSACHUSETTS' = 'Division 1',\n    'MICHIGAN' = 'Division 3',\n    'MINNESOTA' = 'Division 4',\n    'MISSISSIPPI' = 'Division 6',\n    'MISSOURI' = 'Division 4',\n    'MONTANA' = 'Division 8',\n    'NEBRASKA' = 'Division 4',\n    'NEVADA' = 'Division 8',\n    'NEW HAMPSHIRE' = 'Division 1',\n    'NEW JERSEY' = 'Division 2',\n    'NEW MEXICO' = 'Division 8',\n    'NEW YORK' = 'Division 2',\n    'NORTH CAROLINA' = 'Division 5',\n    'NORTH DAKOTA' = 'Division 4',\n    'OHIO' = 'Division 3',\n    'OKLAHOMA' = 'Division 7',\n    'OREGON' = 'Division 9',\n    'PENNSYLVANIA' = 'Division 2',\n    'RHODE ISLAND' = 'Division 1',\n    'SOUTH CAROLINA' = 'Division 5',\n    'SOUTH DAKOTA' = 'Division 4',\n    'TENNESSEE' = 'Division 6',\n    'TEXAS' = 'Division 7',\n    'UTAH' = 'Division 8',\n    'VERMONT' = 'Division 1',\n    'VIRGINIA' = 'Division 5',\n    'WASHINGTON' = 'Division 9',\n    'WEST VIRGINIA' = 'Division 5',\n    'WISCONSIN' = 'Division 3',\n    'WYOMING' = 'Division 8'\n)\n\nnon_county_data &lt;- non_county_data |&gt;\n  mutate(division = ifelse(area_name %in% names(divisions), \n                           divisions[area_name], 'ERROR'))\n\nhead(non_county_data)\n\n# A tibble: 6 × 6\n  area_name     STCOU  year measurement    value division\n  &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n1 UNITED STATES 00000  1987 EDU0101     40024299 ERROR   \n2 UNITED STATES 00000  1988 EDU0101     39967624 ERROR   \n3 UNITED STATES 00000  1989 EDU0101     40317775 ERROR   \n4 UNITED STATES 00000  1990 EDU0101     40737600 ERROR   \n5 UNITED STATES 00000  1991 EDU0101     41385442 ERROR   \n6 UNITED STATES 00000  1992 EDU0101     42088151 ERROR   \n\n\nNOTE - Washington D.C. includes duplicate entries in the dataset, for both “DISTRICT OF COLUMBIA” and “District of Columbia”."
  },
  {
    "objectID": "ST558_Pr1_Report.html#data-processing",
    "href": "ST558_Pr1_Report.html#data-processing",
    "title": "ST 558 - Project 1",
    "section": "",
    "text": "library(tidyverse)\n\n\nStart by reading in the desired data\n\n\ncensus_county &lt;-\n  read_csv(\"https://www4.stat.ncsu.edu/~online/datasets/EDU01a.csv\")\n\nhead(census_county)\n\n# A tibble: 6 × 42\n  Area_name     STCOU EDU010187F EDU010187D EDU010187N1 EDU010187N2 EDU010188F\n  &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;\n1 UNITED STATES 00000          0   40024299 0000        0000                 0\n2 ALABAMA       01000          0     733735 0000        0000                 0\n3 Autauga, AL   01001          0       6829 0000        0000                 0\n4 Baldwin, AL   01003          0      16417 0000        0000                 0\n5 Barbour, AL   01005          0       5071 0000        0000                 0\n6 Bibb, AL      01007          0       3557 0000        0000                 0\n# ℹ 35 more variables: EDU010188D &lt;dbl&gt;, EDU010188N1 &lt;chr&gt;, EDU010188N2 &lt;chr&gt;,\n#   EDU010189F &lt;dbl&gt;, EDU010189D &lt;dbl&gt;, EDU010189N1 &lt;chr&gt;, EDU010189N2 &lt;chr&gt;,\n#   EDU010190F &lt;dbl&gt;, EDU010190D &lt;dbl&gt;, EDU010190N1 &lt;chr&gt;, EDU010190N2 &lt;chr&gt;,\n#   EDU010191F &lt;dbl&gt;, EDU010191D &lt;dbl&gt;, EDU010191N1 &lt;chr&gt;, EDU010191N2 &lt;chr&gt;,\n#   EDU010192F &lt;dbl&gt;, EDU010192D &lt;dbl&gt;, EDU010192N1 &lt;chr&gt;, EDU010192N2 &lt;chr&gt;,\n#   EDU010193F &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010193N1 &lt;chr&gt;, EDU010193N2 &lt;chr&gt;,\n#   EDU010194F &lt;dbl&gt;, EDU010194D &lt;dbl&gt;, EDU010194N1 &lt;chr&gt;, EDU010194N2 &lt;chr&gt;, …\n\n\n\n\n\nSelect the specific data in question, i.e. “Area Name”, STCOU, and variables ending in “D”. The “ends_with()” function, which is part of the {tidyselect} package can be used within the select function to identify those columns which end in “D”.\n\n\ncensus_select &lt;- census_county |&gt; \n  select(area_name=Area_name, STCOU, ends_with(\"D\"))\n\nhead(census_select)\n\n# A tibble: 6 × 12\n  area_name     STCOU EDU010187D EDU010188D EDU010189D EDU010190D EDU010191D\n  &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;\n1 UNITED STATES 00000   40024299   39967624   40317775   40737600   41385442\n2 ALABAMA       01000     733735     728234     730048     728252     725541\n3 Autauga, AL   01001       6829       6900       6920       6847       7008\n4 Baldwin, AL   01003      16417      16465      16799      17054      17479\n5 Barbour, AL   01005       5071       5098       5068       5156       5173\n6 Bibb, AL      01007       3557       3508       3571       3621       3652\n# ℹ 5 more variables: EDU010192D &lt;dbl&gt;, EDU010193D &lt;dbl&gt;, EDU010194D &lt;dbl&gt;,\n#   EDU010195D &lt;dbl&gt;, EDU010196D &lt;dbl&gt;\n\n\n\n\n\n\nConvert data to long format.\n\n\ncensus_long &lt;- census_select |&gt;\n  pivot_longer(cols = ends_with(\"D\"), \n               names_to = \"enrollment\", \n               values_to = \"value\")\n\nhead(census_long)\n\n# A tibble: 6 × 4\n  area_name     STCOU enrollment    value\n  &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;\n1 UNITED STATES 00000 EDU010187D 40024299\n2 UNITED STATES 00000 EDU010188D 39967624\n3 UNITED STATES 00000 EDU010189D 40317775\n4 UNITED STATES 00000 EDU010190D 40737600\n5 UNITED STATES 00000 EDU010191D 41385442\n6 UNITED STATES 00000 EDU010192D 42088151\n\n\n\n\n\n\nCreate new columns for year and measurement from enrollment column\n\n\ncensus_final &lt;- census_long |&gt;\nmutate(\n    year = as.numeric(paste0(\"19\", substr(enrollment, nchar(enrollment) - 2, nchar(enrollment) - 1))),\n    measurement = substr(enrollment, 1, nchar(enrollment) - 3)\n    )|&gt;\nselect(area_name, STCOU, year, measurement, value)\n\nhead(census_final)\n\n# A tibble: 6 × 5\n  area_name     STCOU  year measurement    value\n  &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;\n1 UNITED STATES 00000  1987 EDU0101     40024299\n2 UNITED STATES 00000  1988 EDU0101     39967624\n3 UNITED STATES 00000  1989 EDU0101     40317775\n4 UNITED STATES 00000  1990 EDU0101     40737600\n5 UNITED STATES 00000  1991 EDU0101     41385442\n6 UNITED STATES 00000  1992 EDU0101     42088151\n\n\n\n\n\n\nCreate two datasets, one for county level data and one for non-county level data; then create classes for each dataset\n\n\ncounty_indices &lt;- grep(pattern = \", \\\\w\\\\w\", census_final$area_name)\ncounty_data &lt;- census_final[county_indices, ]\nclass(county_data) &lt;- c(\"county\", class(county_data))\n\nhead(county_data)\n\n# A tibble: 6 × 5\n  area_name   STCOU  year measurement value\n  &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;\n1 Autauga, AL 01001  1987 EDU0101      6829\n2 Autauga, AL 01001  1988 EDU0101      6900\n3 Autauga, AL 01001  1989 EDU0101      6920\n4 Autauga, AL 01001  1990 EDU0101      6847\n5 Autauga, AL 01001  1991 EDU0101      7008\n6 Autauga, AL 01001  1992 EDU0101      7137\n\n\n\nnon_county_data &lt;- census_final[-county_indices, ]\nclass(non_county_data) &lt;- c(\"state\", class(non_county_data))\n\nhead(non_county_data)\n\n# A tibble: 6 × 5\n  area_name     STCOU  year measurement    value\n  &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;\n1 UNITED STATES 00000  1987 EDU0101     40024299\n2 UNITED STATES 00000  1988 EDU0101     39967624\n3 UNITED STATES 00000  1989 EDU0101     40317775\n4 UNITED STATES 00000  1990 EDU0101     40737600\n5 UNITED STATES 00000  1991 EDU0101     41385442\n6 UNITED STATES 00000  1992 EDU0101     42088151\n\n\n\n\n\n\nIn the county dataset, create a new variable for state.\n\n\ncounty_data &lt;- county_data |&gt;\n  mutate(state = substr(area_name, nchar(area_name) - 2, nchar(area_name)))\n\nhead(county_data)\n\n# A tibble: 6 × 6\n  area_name   STCOU  year measurement value state\n  &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n1 Autauga, AL 01001  1987 EDU0101      6829 \" AL\"\n2 Autauga, AL 01001  1988 EDU0101      6900 \" AL\"\n3 Autauga, AL 01001  1989 EDU0101      6920 \" AL\"\n4 Autauga, AL 01001  1990 EDU0101      6847 \" AL\"\n5 Autauga, AL 01001  1991 EDU0101      7008 \" AL\"\n6 Autauga, AL 01001  1992 EDU0101      7137 \" AL\"\n\n\n\n\n\n\nFor non-county level data, create new column for divisions.\n\n\ndivisions &lt;- c(\n    'ALABAMA' = 'Division 6',\n    'ALASKA' = 'Division 9',\n    'ARIZONA' = 'Division 8',\n    'ARKANSAS' = 'Division 7',\n    'CALIFORNIA' = 'Division 9',\n    'COLORADO' = 'Division 8',\n    'CONNECTICUT' = 'Division 1',\n    'DELAWARE' = 'Division 5',\n    'FLORIDA' = 'Division 5',\n    'GEORGIA' = 'Division 5',\n    'HAWAII' = 'Division 9',\n    'IDAHO' = 'Division 8',\n    'ILLINOIS' = 'Division 3',\n    'INDIANA' = 'Division 3',\n    'IOWA' = 'Division 4',\n    'KANSAS' = 'Division 4',\n    'KENTUCKY' = 'Division 6',\n    'LOUISIANA' = 'Division 7',\n    'MAINE' = 'Division 1',\n    'MARYLAND' = 'Division 5',\n    'MASSACHUSETTS' = 'Division 1',\n    'MICHIGAN' = 'Division 3',\n    'MINNESOTA' = 'Division 4',\n    'MISSISSIPPI' = 'Division 6',\n    'MISSOURI' = 'Division 4',\n    'MONTANA' = 'Division 8',\n    'NEBRASKA' = 'Division 4',\n    'NEVADA' = 'Division 8',\n    'NEW HAMPSHIRE' = 'Division 1',\n    'NEW JERSEY' = 'Division 2',\n    'NEW MEXICO' = 'Division 8',\n    'NEW YORK' = 'Division 2',\n    'NORTH CAROLINA' = 'Division 5',\n    'NORTH DAKOTA' = 'Division 4',\n    'OHIO' = 'Division 3',\n    'OKLAHOMA' = 'Division 7',\n    'OREGON' = 'Division 9',\n    'PENNSYLVANIA' = 'Division 2',\n    'RHODE ISLAND' = 'Division 1',\n    'SOUTH CAROLINA' = 'Division 5',\n    'SOUTH DAKOTA' = 'Division 4',\n    'TENNESSEE' = 'Division 6',\n    'TEXAS' = 'Division 7',\n    'UTAH' = 'Division 8',\n    'VERMONT' = 'Division 1',\n    'VIRGINIA' = 'Division 5',\n    'WASHINGTON' = 'Division 9',\n    'WEST VIRGINIA' = 'Division 5',\n    'WISCONSIN' = 'Division 3',\n    'WYOMING' = 'Division 8'\n)\n\nnon_county_data &lt;- non_county_data |&gt;\n  mutate(division = ifelse(area_name %in% names(divisions), \n                           divisions[area_name], 'ERROR'))\n\nhead(non_county_data)\n\n# A tibble: 6 × 6\n  area_name     STCOU  year measurement    value division\n  &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n1 UNITED STATES 00000  1987 EDU0101     40024299 ERROR   \n2 UNITED STATES 00000  1988 EDU0101     39967624 ERROR   \n3 UNITED STATES 00000  1989 EDU0101     40317775 ERROR   \n4 UNITED STATES 00000  1990 EDU0101     40737600 ERROR   \n5 UNITED STATES 00000  1991 EDU0101     41385442 ERROR   \n6 UNITED STATES 00000  1992 EDU0101     42088151 ERROR   \n\n\nNOTE - Washington D.C. includes duplicate entries in the dataset, for both “DISTRICT OF COLUMBIA” and “District of Columbia”."
  },
  {
    "objectID": "ST558_Pr1_Report.html#write-a-generic-function-for-summarizing",
    "href": "ST558_Pr1_Report.html#write-a-generic-function-for-summarizing",
    "title": "Modifying & Processing Census Data",
    "section": "Write a Generic Function for Summarizing",
    "text": "Write a Generic Function for Summarizing"
  },
  {
    "objectID": "ST558_Pr1_Report.html#put-it-together",
    "href": "ST558_Pr1_Report.html#put-it-together",
    "title": "ST 558 - Project 1",
    "section": "Put it Together",
    "text": "Put it Together\n\nOriginal datasets\n\nRun your data processing function on the two enrollment URLs given previously, specifying an appro- priate name for the enrollment data column.\n\n\nEDU01a_transformed_data &lt;- my_wrapper(url = \"https://www4.stat.ncsu.edu/~online/datasets/EDU01a.csv\")\nEDU01b_transformed_data &lt;- my_wrapper(url = \"https://www4.stat.ncsu.edu/~online/datasets/EDU01b.csv\")\n\nhead(EDU01a_transformed_data)\n\n[[1]]\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1987 EDU0101      6829 \" AL\"\n 2 Autauga, AL 01001  1988 EDU0101      6900 \" AL\"\n 3 Autauga, AL 01001  1989 EDU0101      6920 \" AL\"\n 4 Autauga, AL 01001  1990 EDU0101      6847 \" AL\"\n 5 Autauga, AL 01001  1991 EDU0101      7008 \" AL\"\n 6 Autauga, AL 01001  1992 EDU0101      7137 \" AL\"\n 7 Autauga, AL 01001  1993 EDU0101      7152 \" AL\"\n 8 Autauga, AL 01001  1994 EDU0101      7381 \" AL\"\n 9 Autauga, AL 01001  1995 EDU0101      7568 \" AL\"\n10 Autauga, AL 01001  1996 EDU0101      7834 \" AL\"\n# ℹ 31,440 more rows\n\n[[2]]\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement    count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1987 EDU0101     40024299 ERROR   \n 2 UNITED STATES 00000  1988 EDU0101     39967624 ERROR   \n 3 UNITED STATES 00000  1989 EDU0101     40317775 ERROR   \n 4 UNITED STATES 00000  1990 EDU0101     40737600 ERROR   \n 5 UNITED STATES 00000  1991 EDU0101     41385442 ERROR   \n 6 UNITED STATES 00000  1992 EDU0101     42088151 ERROR   \n 7 UNITED STATES 00000  1993 EDU0101     42724710 ERROR   \n 8 UNITED STATES 00000  1994 EDU0101     43369917 ERROR   \n 9 UNITED STATES 00000  1995 EDU0101     43993459 ERROR   \n10 UNITED STATES 00000  1996 EDU0101     44715737 ERROR   \n# ℹ 520 more rows\n\nhead(EDU01b_transformed_data)\n\n[[1]]\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1997 EDU0101      8099 \" AL\"\n 2 Autauga, AL 01001  1998 EDU0101      8211 \" AL\"\n 3 Autauga, AL 01001  1999 EDU0101      8489 \" AL\"\n 4 Autauga, AL 01001  2000 EDU0102      8912 \" AL\"\n 5 Autauga, AL 01001  2001 EDU0102      8626 \" AL\"\n 6 Autauga, AL 01001  2002 EDU0102      8762 \" AL\"\n 7 Autauga, AL 01001  2003 EDU0152      9105 \" AL\"\n 8 Autauga, AL 01001  2004 EDU0152      9200 \" AL\"\n 9 Autauga, AL 01001  2005 EDU0152      9559 \" AL\"\n10 Autauga, AL 01001  2006 EDU0152      9652 \" AL\"\n# ℹ 31,440 more rows\n\n[[2]]\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement    count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1997 EDU0101     44534459 ERROR   \n 2 UNITED STATES 00000  1998 EDU0101     46245814 ERROR   \n 3 UNITED STATES 00000  1999 EDU0101     46368903 ERROR   \n 4 UNITED STATES 00000  2000 EDU0102     46818690 ERROR   \n 5 UNITED STATES 00000  2001 EDU0102     47127066 ERROR   \n 6 UNITED STATES 00000  2002 EDU0102     47606570 ERROR   \n 7 UNITED STATES 00000  2003 EDU0152     48506317 ERROR   \n 8 UNITED STATES 00000  2004 EDU0152     48693287 ERROR   \n 9 UNITED STATES 00000  2005 EDU0152     48978555 ERROR   \n10 UNITED STATES 00000  2006 EDU0152     49140702 ERROR   \n# ℹ 520 more rows\n\n\n\nRun your data combining function to put these into one object (with two data frames)\n\n\ncensus_EDU01 &lt;- combined_enrollment(EDU01a_transformed_data, EDU01b_transformed_data)\n\nhead(census_EDU01)\n\n[[1]]\n# A tibble: 62,900 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1987 EDU0101      6829 \" AL\"\n 2 Autauga, AL 01001  1988 EDU0101      6900 \" AL\"\n 3 Autauga, AL 01001  1989 EDU0101      6920 \" AL\"\n 4 Autauga, AL 01001  1990 EDU0101      6847 \" AL\"\n 5 Autauga, AL 01001  1991 EDU0101      7008 \" AL\"\n 6 Autauga, AL 01001  1992 EDU0101      7137 \" AL\"\n 7 Autauga, AL 01001  1993 EDU0101      7152 \" AL\"\n 8 Autauga, AL 01001  1994 EDU0101      7381 \" AL\"\n 9 Autauga, AL 01001  1995 EDU0101      7568 \" AL\"\n10 Autauga, AL 01001  1996 EDU0101      7834 \" AL\"\n# ℹ 62,890 more rows\n\n[[2]]\n# A tibble: 1,060 × 6\n   area_name     STCOU  year measurement    count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1987 EDU0101     40024299 ERROR   \n 2 UNITED STATES 00000  1988 EDU0101     39967624 ERROR   \n 3 UNITED STATES 00000  1989 EDU0101     40317775 ERROR   \n 4 UNITED STATES 00000  1990 EDU0101     40737600 ERROR   \n 5 UNITED STATES 00000  1991 EDU0101     41385442 ERROR   \n 6 UNITED STATES 00000  1992 EDU0101     42088151 ERROR   \n 7 UNITED STATES 00000  1993 EDU0101     42724710 ERROR   \n 8 UNITED STATES 00000  1994 EDU0101     43369917 ERROR   \n 9 UNITED STATES 00000  1995 EDU0101     43993459 ERROR   \n10 UNITED STATES 00000  1996 EDU0101     44715737 ERROR   \n# ℹ 1,050 more rows\n\n\n\nUse the plot function on the state data frame\n\n\nplot.state(census_EDU01[[2]], value = \"count\")\n\n\n\n\n\n\n\n\n\nUse the plot function on the county data frame\n\n\nplot.county(census_EDU01[[1]], state_selection = \"NC\", top = TRUE, n = 20)\n\n# A tibble: 20 × 2\n   area_name         Mean\n   &lt;chr&gt;            &lt;dbl&gt;\n 1 Mecklenburg, NC 94598.\n 2 Wake, NC        87053.\n 3 Guilford, NC    59615.\n 4 Cumberland, NC  49999.\n 5 Forsyth, NC     42897.\n 6 Gaston, NC      30694.\n 7 Durham, NC      30223.\n 8 Buncombe, NC    28411.\n 9 Robeson, NC     23909.\n10 Davidson, NC    23405.\n11 Catawba, NC     21907.\n12 Cabarrus, NC    21244.\n13 New Hanover, NC 21103.\n14 Union, NC       20900.\n15 Onslow, NC      20744.\n16 Randolph, NC    19697.\n17 Pitt, NC        19407.\n18 Iredell, NC     19341.\n19 Alamance, NC    19303.\n20 Johnston, NC    18926.\n\n\n\nplot.county(census_EDU01[[1]], state_selection = \"SC\", top = FALSE, n = 7)\n\n# A tibble: 7 × 2\n  area_name      Mean\n  &lt;chr&gt;         &lt;dbl&gt;\n1 McCormick, SC 1279.\n2 Calhoun, SC   2024.\n3 Allendale, SC 2158.\n4 Saluda, SC    2234.\n5 Jasper, SC    2929.\n6 Bamberg, SC   3055.\n7 Lee, SC       3278.\n\n\n\nplot.county(census_EDU01[[1]])\n\n# A tibble: 5 × 2\n  area_name         Mean\n  &lt;chr&gt;            &lt;dbl&gt;\n1 Mecklenburg, NC 94598.\n2 Wake, NC        87053.\n3 Guilford, NC    59615.\n4 Cumberland, NC  49999.\n5 Forsyth, NC     42897.\n\n\n\nplot.county(census_EDU01[[1]], state_selection = \"PA\", top = TRUE, n = 8)\n\n# A tibble: 8 × 2\n  area_name           Mean\n  &lt;chr&gt;              &lt;dbl&gt;\n1 Philadelphia, PA 204874.\n2 Allegheny, PA    167602.\n3 Montgomery, PA    91621.\n4 Bucks, PA         85044.\n5 Delaware, PA      67154.\n6 Lancaster, PA     65147.\n7 Berks, PA         60150.\n8 Chester, PA       60029 \n\n\n\n\nNew Datasets\n\nRun the data processing function on the four data sets at URLs given\n\n\nPST01a_transformed_data &lt;- my_wrapper(url = \"https://www4.stat.ncsu.edu/~online/datasets/PST01a.csv\")\nPST01b_transformed_data &lt;- my_wrapper(url = \"https://www4.stat.ncsu.edu/~online/datasets/PST01b.csv\")\nPST01c_transformed_data &lt;- my_wrapper(url = \"https://www4.stat.ncsu.edu/~online/datasets/PST01c.csv\")\nPST01d_transformed_data &lt;- my_wrapper(url = \"https://www4.stat.ncsu.edu/~online/datasets/PST01d.csv\")\n\nhead(PST01a_transformed_data)\n\n[[1]]\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1971 PST0151     25508 \" AL\"\n 2 Autauga, AL 01001  1972 PST0151     27166 \" AL\"\n 3 Autauga, AL 01001  1973 PST0151     28463 \" AL\"\n 4 Autauga, AL 01001  1974 PST0151     29266 \" AL\"\n 5 Autauga, AL 01001  1975 PST0151     29718 \" AL\"\n 6 Autauga, AL 01001  1976 PST0151     29896 \" AL\"\n 7 Autauga, AL 01001  1977 PST0151     30462 \" AL\"\n 8 Autauga, AL 01001  1978 PST0151     30882 \" AL\"\n 9 Autauga, AL 01001  1979 PST0151     32055 \" AL\"\n10 Autauga, AL 01001  1981 PST0251     31985 \" AL\"\n# ℹ 31,440 more rows\n\n[[2]]\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement     count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1971 PST0151     206827028 ERROR   \n 2 UNITED STATES 00000  1972 PST0151     209283904 ERROR   \n 3 UNITED STATES 00000  1973 PST0151     211357490 ERROR   \n 4 UNITED STATES 00000  1974 PST0151     213341552 ERROR   \n 5 UNITED STATES 00000  1975 PST0151     215465246 ERROR   \n 6 UNITED STATES 00000  1976 PST0151     217562728 ERROR   \n 7 UNITED STATES 00000  1977 PST0151     219759860 ERROR   \n 8 UNITED STATES 00000  1978 PST0151     222095080 ERROR   \n 9 UNITED STATES 00000  1979 PST0151     224567234 ERROR   \n10 UNITED STATES 00000  1981 PST0251     229466391 ERROR   \n# ℹ 520 more rows\n\nhead(PST01b_transformed_data)\n\n[[1]]\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1982 PST0251     32038 \" AL\"\n 2 Autauga, AL 01001  1983 PST0251     32057 \" AL\"\n 3 Autauga, AL 01001  1984 PST0251     32130 \" AL\"\n 4 Autauga, AL 01001  1985 PST0251     32248 \" AL\"\n 5 Autauga, AL 01001  1986 PST0251     32895 \" AL\"\n 6 Autauga, AL 01001  1987 PST0251     33266 \" AL\"\n 7 Autauga, AL 01001  1988 PST0251     33637 \" AL\"\n 8 Autauga, AL 01001  1989 PST0251     33996 \" AL\"\n 9 Autauga, AL 01001  1990 PST0301     34222 \" AL\"\n10 Autauga, AL 01001  1990 PST0351     34353 \" AL\"\n# ℹ 31,440 more rows\n\n[[2]]\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement     count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1982 PST0251     231665106 ERROR   \n 2 UNITED STATES 00000  1983 PST0251     233792697 ERROR   \n 3 UNITED STATES 00000  1984 PST0251     235825544 ERROR   \n 4 UNITED STATES 00000  1985 PST0251     237924311 ERROR   \n 5 UNITED STATES 00000  1986 PST0251     240133472 ERROR   \n 6 UNITED STATES 00000  1987 PST0251     242289738 ERROR   \n 7 UNITED STATES 00000  1988 PST0251     244499776 ERROR   \n 8 UNITED STATES 00000  1989 PST0251     246819839 ERROR   \n 9 UNITED STATES 00000  1990 PST0301     248790925 ERROR   \n10 UNITED STATES 00000  1990 PST0351     249622814 ERROR   \n# ℹ 520 more rows\n\nhead(PST01c_transformed_data)\n\n[[1]]\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1991 PST0351     35010 \" AL\"\n 2 Autauga, AL 01001  1992 PST0351     35985 \" AL\"\n 3 Autauga, AL 01001  1993 PST0351     36953 \" AL\"\n 4 Autauga, AL 01001  1994 PST0351     38186 \" AL\"\n 5 Autauga, AL 01001  1995 PST0351     39112 \" AL\"\n 6 Autauga, AL 01001  1996 PST0351     40207 \" AL\"\n 7 Autauga, AL 01001  1997 PST0351     41238 \" AL\"\n 8 Autauga, AL 01001  1998 PST0351     42106 \" AL\"\n 9 Autauga, AL 01001  1999 PST0351     42963 \" AL\"\n10 Autauga, AL 01001  2000 PST0402     43671 \" AL\"\n# ℹ 31,440 more rows\n\n[[2]]\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement     count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1991 PST0351     252980941 ERROR   \n 2 UNITED STATES 00000  1992 PST0351     256514224 ERROR   \n 3 UNITED STATES 00000  1993 PST0351     259918588 ERROR   \n 4 UNITED STATES 00000  1994 PST0351     263125821 ERROR   \n 5 UNITED STATES 00000  1995 PST0351     266278393 ERROR   \n 6 UNITED STATES 00000  1996 PST0351     269394284 ERROR   \n 7 UNITED STATES 00000  1997 PST0351     272646925 ERROR   \n 8 UNITED STATES 00000  1998 PST0351     275854104 ERROR   \n 9 UNITED STATES 00000  1999 PST0351     279040168 ERROR   \n10 UNITED STATES 00000  2000 PST0402     281424602 ERROR   \n# ℹ 520 more rows\n\nhead(PST01d_transformed_data)\n\n[[1]]\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  2000 PST0452     43872 \" AL\"\n 2 Autauga, AL 01001  2001 PST0452     44434 \" AL\"\n 3 Autauga, AL 01001  2002 PST0452     45157 \" AL\"\n 4 Autauga, AL 01001  2003 PST0452     45762 \" AL\"\n 5 Autauga, AL 01001  2004 PST0452     46933 \" AL\"\n 6 Autauga, AL 01001  2005 PST0452     47870 \" AL\"\n 7 Autauga, AL 01001  2006 PST0452     49105 \" AL\"\n 8 Autauga, AL 01001  2007 PST0452     49834 \" AL\"\n 9 Autauga, AL 01001  2008 PST0452     50354 \" AL\"\n10 Autauga, AL 01001  2009 PST0452     50756 \" AL\"\n# ℹ 31,440 more rows\n\n[[2]]\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement     count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  2000 PST0452     282171957 ERROR   \n 2 UNITED STATES 00000  2001 PST0452     285081556 ERROR   \n 3 UNITED STATES 00000  2002 PST0452     287803914 ERROR   \n 4 UNITED STATES 00000  2003 PST0452     290326418 ERROR   \n 5 UNITED STATES 00000  2004 PST0452     293045739 ERROR   \n 6 UNITED STATES 00000  2005 PST0452     295753151 ERROR   \n 7 UNITED STATES 00000  2006 PST0452     298593212 ERROR   \n 8 UNITED STATES 00000  2007 PST0452     301579895 ERROR   \n 9 UNITED STATES 00000  2008 PST0452     304374846 ERROR   \n10 UNITED STATES 00000  2009 PST0452     307006550 ERROR   \n# ℹ 520 more rows\n\n\n\nRun the data combining function (probably three times) to put these into one object (with two data frames)\n\n\nPST_01 &lt;- combined_enrollment(PST01a_transformed_data, PST01b_transformed_data)\nPST_02 &lt;- combined_enrollment(PST01c_transformed_data, PST01d_transformed_data)\nPST_final &lt;- combined_enrollment(PST_01, PST_02)\n\nhead(PST_final)\n\n[[1]]\n# A tibble: 125,800 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1971 PST0151     25508 \" AL\"\n 2 Autauga, AL 01001  1972 PST0151     27166 \" AL\"\n 3 Autauga, AL 01001  1973 PST0151     28463 \" AL\"\n 4 Autauga, AL 01001  1974 PST0151     29266 \" AL\"\n 5 Autauga, AL 01001  1975 PST0151     29718 \" AL\"\n 6 Autauga, AL 01001  1976 PST0151     29896 \" AL\"\n 7 Autauga, AL 01001  1977 PST0151     30462 \" AL\"\n 8 Autauga, AL 01001  1978 PST0151     30882 \" AL\"\n 9 Autauga, AL 01001  1979 PST0151     32055 \" AL\"\n10 Autauga, AL 01001  1981 PST0251     31985 \" AL\"\n# ℹ 125,790 more rows\n\n[[2]]\n# A tibble: 2,120 × 6\n   area_name     STCOU  year measurement     count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1971 PST0151     206827028 ERROR   \n 2 UNITED STATES 00000  1972 PST0151     209283904 ERROR   \n 3 UNITED STATES 00000  1973 PST0151     211357490 ERROR   \n 4 UNITED STATES 00000  1974 PST0151     213341552 ERROR   \n 5 UNITED STATES 00000  1975 PST0151     215465246 ERROR   \n 6 UNITED STATES 00000  1976 PST0151     217562728 ERROR   \n 7 UNITED STATES 00000  1977 PST0151     219759860 ERROR   \n 8 UNITED STATES 00000  1978 PST0151     222095080 ERROR   \n 9 UNITED STATES 00000  1979 PST0151     224567234 ERROR   \n10 UNITED STATES 00000  1981 PST0251     229466391 ERROR   \n# ℹ 2,110 more rows\n\n\n\nUse the plot function on the state data frame\n\n\nplot.state(PST_final[[2]], value = \"count\")\n\n\n\n\n\n\n\n\n\nUse the plot function on the county data frame\n\n\nplot.county(census_EDU01[[1]], state_selection = \"CA\", top = TRUE, n = 15)\n\n# A tibble: 15 × 2\n   area_name              Mean\n   &lt;chr&gt;                 &lt;dbl&gt;\n 1 Los Angeles, CA    1543014.\n 2 San Diego, CA       439357.\n 3 Orange, CA          437775.\n 4 San Bernardino, CA  341826.\n 5 Riverside, CA       280021.\n 6 Santa Clara, CA     242212.\n 7 Alameda, CA         201361.\n 8 Sacramento, CA      201016.\n 9 Fresno, CA          167325.\n10 Contra Costa, CA    145231.\n11 Kern, CA            137252.\n12 Ventura, CA         127236.\n13 San Joaquin, CA     110280.\n14 Stanislaus, CA       89397.\n15 San Mateo, CA        86601.\n\n\n\nplot.county(census_EDU01[[1]], state_selection = \"TX\", top = TRUE, n = 4)\n\n# A tibble: 4 × 2\n  area_name      Mean\n  &lt;chr&gt;         &lt;dbl&gt;\n1 Harris, TX  608946.\n2 Dallas, TX  381276.\n3 Bexar, TX   251935 \n4 Tarrant, TX 244426.\n\n\n\nplot.county(census_EDU01[[1]])\n\n# A tibble: 5 × 2\n  area_name         Mean\n  &lt;chr&gt;            &lt;dbl&gt;\n1 Mecklenburg, NC 94598.\n2 Wake, NC        87053.\n3 Guilford, NC    59615.\n4 Cumberland, NC  49999.\n5 Forsyth, NC     42897.\n\n\n\nplot.county(census_EDU01[[1]], state_selection = \"NY\", top = TRUE, n = 10)\n\n# A tibble: 10 × 2\n   area_name          Mean\n   &lt;chr&gt;             &lt;dbl&gt;\n 1 Kings, NY       976642.\n 2 Suffolk, NY     239556.\n 3 Nassau, NY      192139.\n 4 Erie, NY        140979.\n 5 Westchester, NY 128863.\n 6 Monroe, NY      117138.\n 7 Onondaga, NY     77616.\n 8 Orange, NY       59566.\n 9 Dutchess, NY     43558.\n10 Albany, NY       39988."
  },
  {
    "objectID": "Task List.html",
    "href": "Task List.html",
    "title": "Project 1 Task List",
    "section": "",
    "text": "Create R Project & github repo - Charles\nRead-in the EDU01 dataset and manipulate the data as described in the project descriptions of items 1 to 6.\nRepeat the process from above with the 2nd component of the dataset using functions. Write a function for steps 1 & 2.\nWrite a function for step 3\nWrite a function for step 5\nWrite a function for step 6\nWrite the “cumulative” function, including the wrapper function and the short function to combine data\nWrite a summarizing function\nPut it Together"
  },
  {
    "objectID": "Task List.html#project-1-task-list",
    "href": "Task List.html#project-1-task-list",
    "title": "Project 1 Task List",
    "section": "",
    "text": "Create R Project & github repo - Charles\nRead-in the EDU01 dataset and manipulate the data as described in the project descriptions of items 1 to 6.\nRepeat the process from above with the 2nd component of the dataset using functions. Write a function for steps 1 & 2.\nWrite a function for step 3\nWrite a function for step 5\nWrite a function for step 6\nWrite the “cumulative” function, including the wrapper function and the short function to combine data\nWrite a summarizing function\nPut it Together"
  },
  {
    "objectID": "ST558_Pr1_Report.html#generating-functions-to-process-data",
    "href": "ST558_Pr1_Report.html#generating-functions-to-process-data",
    "title": "ST 558 - Project 1",
    "section": "Generating Functions to Process Data",
    "text": "Generating Functions to Process Data\n\nRepeat the steps described in the ‘Data Processing’ section, but within the context of a function to generalize the actions. First, we’ll build building block functions to replicate the specific tasks described in the preceding section.\n\n\ncensus_county_b &lt;-\n  read_csv(\"https://www4.stat.ncsu.edu/~online/datasets/EDU01b.csv\")\n\nhead(census_county_b)\n\n# A tibble: 6 × 42\n  Area_name     STCOU EDU010197F EDU010197D EDU010197N1 EDU010197N2 EDU010198F\n  &lt;chr&gt;         &lt;chr&gt;      &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;            &lt;dbl&gt;\n1 UNITED STATES 00000          0   44534459 0000        0000                 0\n2 ALABAMA       01000          0     737386 0000        0000                 0\n3 Autauga, AL   01001          0       8099 0000        0000                 0\n4 Baldwin, AL   01003          0      21410 0000        0000                 0\n5 Barbour, AL   01005          0       5100 0000        0000                 0\n6 Bibb, AL      01007          0       3717 0000        0000                 0\n# ℹ 35 more variables: EDU010198D &lt;dbl&gt;, EDU010198N1 &lt;chr&gt;, EDU010198N2 &lt;chr&gt;,\n#   EDU010199F &lt;dbl&gt;, EDU010199D &lt;dbl&gt;, EDU010199N1 &lt;chr&gt;, EDU010199N2 &lt;chr&gt;,\n#   EDU010200F &lt;dbl&gt;, EDU010200D &lt;dbl&gt;, EDU010200N1 &lt;chr&gt;, EDU010200N2 &lt;chr&gt;,\n#   EDU010201F &lt;dbl&gt;, EDU010201D &lt;dbl&gt;, EDU010201N1 &lt;chr&gt;, EDU010201N2 &lt;chr&gt;,\n#   EDU010202F &lt;dbl&gt;, EDU010202D &lt;dbl&gt;, EDU010202N1 &lt;chr&gt;, EDU010202N2 &lt;chr&gt;,\n#   EDU015203F &lt;dbl&gt;, EDU015203D &lt;dbl&gt;, EDU015203N1 &lt;chr&gt;, EDU015203N2 &lt;chr&gt;,\n#   EDU015204F &lt;dbl&gt;, EDU015204D &lt;dbl&gt;, EDU015204N1 &lt;chr&gt;, EDU015204N2 &lt;chr&gt;, …\n\n\n\nFunction for Steps 1 & 2\n\nWrite a function associated with pulling out area name, STCOU, and enrollment numbers, then pivoting to a long data format.\n\n\nsel_pivot &lt;- function(x, value = \"count\") {\n  x |&gt;\n    select(area_name=Area_name, STCOU, ends_with(\"D\")) |&gt;\n    pivot_longer(cols = ends_with(\"D\"),\n                 names_to = \"enrollment\",\n                 values_to = value)\n}\n\ncensus_long_b &lt;- sel_pivot(census_county_b)\nhead(census_long_b)\n\n# A tibble: 6 × 4\n  area_name     STCOU enrollment    count\n  &lt;chr&gt;         &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;\n1 UNITED STATES 00000 EDU010197D 44534459\n2 UNITED STATES 00000 EDU010198D 46245814\n3 UNITED STATES 00000 EDU010199D 46368903\n4 UNITED STATES 00000 EDU010200D 46818690\n5 UNITED STATES 00000 EDU010201D 47127066\n6 UNITED STATES 00000 EDU010202D 47606570\n\n\n\n\nFunction for Step 3\n\nWrite a further function which creates columns for ‘year’ and ‘measurement’ from the output of the ‘sel_pivot’ function.\n\n\nadd_yr_meas &lt;- function(x, value = \"count\") {\n  yr_end &lt;- substr(x$enrollment, nchar(x$enrollment) - 2,\n                   nchar(x$enrollment) - 1)\n  x |&gt;\n    mutate(year = as.numeric(ifelse(yr_end &lt;= 24,\n                                    paste0(\"20\", yr_end),\n                                    paste0(\"19\", yr_end))),\n    measurement = substr(enrollment, 1, nchar(enrollment) - 3)) |&gt;\n  select(area_name, STCOU, year, measurement, value)\n}\n\ncensus_final_b &lt;- add_yr_meas(census_long_b)\nhead(census_final_b)\n\n# A tibble: 6 × 5\n  area_name     STCOU  year measurement    count\n  &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt;\n1 UNITED STATES 00000  1997 EDU0101     44534459\n2 UNITED STATES 00000  1998 EDU0101     46245814\n3 UNITED STATES 00000  1999 EDU0101     46368903\n4 UNITED STATES 00000  2000 EDU0102     46818690\n5 UNITED STATES 00000  2001 EDU0102     47127066\n6 UNITED STATES 00000  2002 EDU0102     47606570\n\n\n\n\nFunction for Step 5\n\nWrite a function which adds a state ID column for county-specific data. At this point, 2 separate data sets (county vs non-county) are not presumed.\n\n\nadd_state &lt;- function(x) {\n  x |&gt;\n    mutate(state = substr(area_name, nchar(area_name) - 2,\n                          nchar(area_name)))\n}\n\n\n\nFunction for Step 6\n\nWrite a function assigning a census-defined “division” to the states identified in the non-county dataset. At this point, 2 separate data sets (county vs non-county) are not presumed.\n\n\nassign_division &lt;- function(x){\n  divisions &lt;- c(\n    'ALABAMA' = 'Division 6',\n    'ALASKA' = 'Division 9',\n    'ARIZONA' = 'Division 8',\n    'ARKANSAS' = 'Division 7',\n    'CALIFORNIA' = 'Division 9',\n    'COLORADO' = 'Division 8',\n    'CONNECTICUT' = 'Division 1',\n    'DELAWARE' = 'Division 5',\n    'FLORIDA' = 'Division 5',\n    'GEORGIA' = 'Division 5',\n    'HAWAII' = 'Division 9',\n    'IDAHO' = 'Division 8',\n    'ILLINOIS' = 'Division 3',\n    'INDIANA' = 'Division 3',\n    'IOWA' = 'Division 4',\n    'KANSAS' = 'Division 4',\n    'KENTUCKY' = 'Division 6',\n    'LOUISIANA' = 'Division 7',\n    'MAINE' = 'Division 1',\n    'MARYLAND' = 'Division 5',\n    'MASSACHUSETTS' = 'Division 1',\n    'MICHIGAN' = 'Division 3',\n    'MINNESOTA' = 'Division 4',\n    'MISSISSIPPI' = 'Division 6',\n    'MISSOURI' = 'Division 4',\n    'MONTANA' = 'Division 8',\n    'NEBRASKA' = 'Division 4',\n    'NEVADA' = 'Division 8',\n    'NEW HAMPSHIRE' = 'Division 1',\n    'NEW JERSEY' = 'Division 2',\n    'NEW MEXICO' = 'Division 8',\n    'NEW YORK' = 'Division 2',\n    'NORTH CAROLINA' = 'Division 5',\n    'NORTH DAKOTA' = 'Division 4',\n    'OHIO' = 'Division 3',\n    'OKLAHOMA' = 'Division 7',\n    'OREGON' = 'Division 9',\n    'PENNSYLVANIA' = 'Division 2',\n    'RHODE ISLAND' = 'Division 1',\n    'SOUTH CAROLINA' = 'Division 5',\n    'SOUTH DAKOTA' = 'Division 4',\n    'TENNESSEE' = 'Division 6',\n    'TEXAS' = 'Division 7',\n    'UTAH' = 'Division 8',\n    'VERMONT' = 'Division 1',\n    'VIRGINIA' = 'Division 5',\n    'WASHINGTON' = 'Division 9',\n    'WEST VIRGINIA' = 'Division 5',\n    'WISCONSIN' = 'Division 3',\n    'WYOMING' = 'Division 8'\n)\n  x |&gt;\n    mutate(division = ifelse(area_name %in% names(divisions), \n                           divisions[area_name], 'ERROR'))\n}\n\n\n\nFunction for Step 4\n\nNow write a function that creates 2 data sets (county & non-county) and uses the ‘add_state’ and ‘assign_division’ functions above to return 2 tibbles.\n\n\nThe input to this dataset is the single data set with county & non-county data which has the variables ‘year’, ‘measurement’, and a function-defined “value”.\n\n\nsep_county_data &lt;- function(x) {\n  fcn_indices &lt;- grep(pattern = \", \\\\w\\\\w\", x$area_name)\n  fcn_county_data &lt;- x[fcn_indices, ]\n  class(fcn_county_data) &lt;- c(\"county\", class(fcn_county_data))\n  fcn_non_county_data &lt;- x[-fcn_indices, ]\n  class(fcn_non_county_data) &lt;- c(\"state\", class(fcn_non_county_data))\n  transformed_county_data &lt;- add_state(fcn_county_data)\n  transformed_non_county_data &lt;- assign_division(fcn_non_county_data)\n  transformed_data_list &lt;- list(transformed_county_data,\n                                transformed_non_county_data)\n  return(transformed_data_list)\n}\n\nsep_county_data(census_final_b)\n\n[[1]]\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1997 EDU0101      8099 \" AL\"\n 2 Autauga, AL 01001  1998 EDU0101      8211 \" AL\"\n 3 Autauga, AL 01001  1999 EDU0101      8489 \" AL\"\n 4 Autauga, AL 01001  2000 EDU0102      8912 \" AL\"\n 5 Autauga, AL 01001  2001 EDU0102      8626 \" AL\"\n 6 Autauga, AL 01001  2002 EDU0102      8762 \" AL\"\n 7 Autauga, AL 01001  2003 EDU0152      9105 \" AL\"\n 8 Autauga, AL 01001  2004 EDU0152      9200 \" AL\"\n 9 Autauga, AL 01001  2005 EDU0152      9559 \" AL\"\n10 Autauga, AL 01001  2006 EDU0152      9652 \" AL\"\n# ℹ 31,440 more rows\n\n[[2]]\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement    count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1997 EDU0101     44534459 ERROR   \n 2 UNITED STATES 00000  1998 EDU0101     46245814 ERROR   \n 3 UNITED STATES 00000  1999 EDU0101     46368903 ERROR   \n 4 UNITED STATES 00000  2000 EDU0102     46818690 ERROR   \n 5 UNITED STATES 00000  2001 EDU0102     47127066 ERROR   \n 6 UNITED STATES 00000  2002 EDU0102     47606570 ERROR   \n 7 UNITED STATES 00000  2003 EDU0152     48506317 ERROR   \n 8 UNITED STATES 00000  2004 EDU0152     48693287 ERROR   \n 9 UNITED STATES 00000  2005 EDU0152     48978555 ERROR   \n10 UNITED STATES 00000  2006 EDU0152     49140702 ERROR   \n# ℹ 520 more rows\n\n\n\n\nWrapper Function\n\nCombining the functions developed previously, we’ll create one wrapper function to perform all the steps.\n\n\nmy_wrapper &lt;- function(url, value = \"count\") {\n  read_csv(url) |&gt;\n    sel_pivot(value = value) |&gt;\n    add_yr_meas(value = value) |&gt;\n    sep_county_data()\n}\n\nmy_wrapper(url = \"https://www4.stat.ncsu.edu/~online/datasets/EDU01b.csv\")\n\n[[1]]\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1997 EDU0101      8099 \" AL\"\n 2 Autauga, AL 01001  1998 EDU0101      8211 \" AL\"\n 3 Autauga, AL 01001  1999 EDU0101      8489 \" AL\"\n 4 Autauga, AL 01001  2000 EDU0102      8912 \" AL\"\n 5 Autauga, AL 01001  2001 EDU0102      8626 \" AL\"\n 6 Autauga, AL 01001  2002 EDU0102      8762 \" AL\"\n 7 Autauga, AL 01001  2003 EDU0152      9105 \" AL\"\n 8 Autauga, AL 01001  2004 EDU0152      9200 \" AL\"\n 9 Autauga, AL 01001  2005 EDU0152      9559 \" AL\"\n10 Autauga, AL 01001  2006 EDU0152      9652 \" AL\"\n# ℹ 31,440 more rows\n\n[[2]]\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement    count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1997 EDU0101     44534459 ERROR   \n 2 UNITED STATES 00000  1998 EDU0101     46245814 ERROR   \n 3 UNITED STATES 00000  1999 EDU0101     46368903 ERROR   \n 4 UNITED STATES 00000  2000 EDU0102     46818690 ERROR   \n 5 UNITED STATES 00000  2001 EDU0102     47127066 ERROR   \n 6 UNITED STATES 00000  2002 EDU0102     47606570 ERROR   \n 7 UNITED STATES 00000  2003 EDU0152     48506317 ERROR   \n 8 UNITED STATES 00000  2004 EDU0152     48693287 ERROR   \n 9 UNITED STATES 00000  2005 EDU0152     48978555 ERROR   \n10 UNITED STATES 00000  2006 EDU0152     49140702 ERROR   \n# ℹ 520 more rows\n\n\n\n\nCall it and Combine\n\nUse the preceding ‘my_wrapper’ function to transform/manipulate the 2 census datasets on enrollment which have been studied thus far - EDU01a & EDU01b.\n\n\nEDU01a_transformed_data &lt;- my_wrapper(url = \"https://www4.stat.ncsu.edu/~online/datasets/EDU01a.csv\")\nEDU01b_transformed_data &lt;- my_wrapper(url = \"https://www4.stat.ncsu.edu/~online/datasets/EDU01b.csv\")\n\nhead(EDU01a_transformed_data)\n\n[[1]]\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1987 EDU0101      6829 \" AL\"\n 2 Autauga, AL 01001  1988 EDU0101      6900 \" AL\"\n 3 Autauga, AL 01001  1989 EDU0101      6920 \" AL\"\n 4 Autauga, AL 01001  1990 EDU0101      6847 \" AL\"\n 5 Autauga, AL 01001  1991 EDU0101      7008 \" AL\"\n 6 Autauga, AL 01001  1992 EDU0101      7137 \" AL\"\n 7 Autauga, AL 01001  1993 EDU0101      7152 \" AL\"\n 8 Autauga, AL 01001  1994 EDU0101      7381 \" AL\"\n 9 Autauga, AL 01001  1995 EDU0101      7568 \" AL\"\n10 Autauga, AL 01001  1996 EDU0101      7834 \" AL\"\n# ℹ 31,440 more rows\n\n[[2]]\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement    count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1987 EDU0101     40024299 ERROR   \n 2 UNITED STATES 00000  1988 EDU0101     39967624 ERROR   \n 3 UNITED STATES 00000  1989 EDU0101     40317775 ERROR   \n 4 UNITED STATES 00000  1990 EDU0101     40737600 ERROR   \n 5 UNITED STATES 00000  1991 EDU0101     41385442 ERROR   \n 6 UNITED STATES 00000  1992 EDU0101     42088151 ERROR   \n 7 UNITED STATES 00000  1993 EDU0101     42724710 ERROR   \n 8 UNITED STATES 00000  1994 EDU0101     43369917 ERROR   \n 9 UNITED STATES 00000  1995 EDU0101     43993459 ERROR   \n10 UNITED STATES 00000  1996 EDU0101     44715737 ERROR   \n# ℹ 520 more rows\n\nhead(EDU01b_transformed_data)\n\n[[1]]\n# A tibble: 31,450 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1997 EDU0101      8099 \" AL\"\n 2 Autauga, AL 01001  1998 EDU0101      8211 \" AL\"\n 3 Autauga, AL 01001  1999 EDU0101      8489 \" AL\"\n 4 Autauga, AL 01001  2000 EDU0102      8912 \" AL\"\n 5 Autauga, AL 01001  2001 EDU0102      8626 \" AL\"\n 6 Autauga, AL 01001  2002 EDU0102      8762 \" AL\"\n 7 Autauga, AL 01001  2003 EDU0152      9105 \" AL\"\n 8 Autauga, AL 01001  2004 EDU0152      9200 \" AL\"\n 9 Autauga, AL 01001  2005 EDU0152      9559 \" AL\"\n10 Autauga, AL 01001  2006 EDU0152      9652 \" AL\"\n# ℹ 31,440 more rows\n\n[[2]]\n# A tibble: 530 × 6\n   area_name     STCOU  year measurement    count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1997 EDU0101     44534459 ERROR   \n 2 UNITED STATES 00000  1998 EDU0101     46245814 ERROR   \n 3 UNITED STATES 00000  1999 EDU0101     46368903 ERROR   \n 4 UNITED STATES 00000  2000 EDU0102     46818690 ERROR   \n 5 UNITED STATES 00000  2001 EDU0102     47127066 ERROR   \n 6 UNITED STATES 00000  2002 EDU0102     47606570 ERROR   \n 7 UNITED STATES 00000  2003 EDU0152     48506317 ERROR   \n 8 UNITED STATES 00000  2004 EDU0152     48693287 ERROR   \n 9 UNITED STATES 00000  2005 EDU0152     48978555 ERROR   \n10 UNITED STATES 00000  2006 EDU0152     49140702 ERROR   \n# ℹ 520 more rows\n\n\n\nCreate a function that combines county data from EDU01a & EDU01b, and combines non-county data from EDU01a & EDU01b. The result will be 2 tibbles, one of combined county data, and one of combined non-county data.\n\n\ncombined_enrollment &lt;- function(dataset_a, dataset_b) {\n  county_df &lt;- dplyr::bind_rows(dataset_a[[1]], dataset_b[[1]])\n  state_df &lt;- dplyr::bind_rows(dataset_a[[2]], dataset_b[[2]])\n  combined_data_list &lt;- list(county_df, state_df)\n  return(combined_data_list)\n}\n\ncensus_EDU01 &lt;- combined_enrollment(EDU01a_transformed_data, EDU01b_transformed_data)\n\nhead(census_EDU01)\n\n[[1]]\n# A tibble: 62,900 × 6\n   area_name   STCOU  year measurement count state\n   &lt;chr&gt;       &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;\n 1 Autauga, AL 01001  1987 EDU0101      6829 \" AL\"\n 2 Autauga, AL 01001  1988 EDU0101      6900 \" AL\"\n 3 Autauga, AL 01001  1989 EDU0101      6920 \" AL\"\n 4 Autauga, AL 01001  1990 EDU0101      6847 \" AL\"\n 5 Autauga, AL 01001  1991 EDU0101      7008 \" AL\"\n 6 Autauga, AL 01001  1992 EDU0101      7137 \" AL\"\n 7 Autauga, AL 01001  1993 EDU0101      7152 \" AL\"\n 8 Autauga, AL 01001  1994 EDU0101      7381 \" AL\"\n 9 Autauga, AL 01001  1995 EDU0101      7568 \" AL\"\n10 Autauga, AL 01001  1996 EDU0101      7834 \" AL\"\n# ℹ 62,890 more rows\n\n[[2]]\n# A tibble: 1,060 × 6\n   area_name     STCOU  year measurement    count division\n   &lt;chr&gt;         &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;   \n 1 UNITED STATES 00000  1987 EDU0101     40024299 ERROR   \n 2 UNITED STATES 00000  1988 EDU0101     39967624 ERROR   \n 3 UNITED STATES 00000  1989 EDU0101     40317775 ERROR   \n 4 UNITED STATES 00000  1990 EDU0101     40737600 ERROR   \n 5 UNITED STATES 00000  1991 EDU0101     41385442 ERROR   \n 6 UNITED STATES 00000  1992 EDU0101     42088151 ERROR   \n 7 UNITED STATES 00000  1993 EDU0101     42724710 ERROR   \n 8 UNITED STATES 00000  1994 EDU0101     43369917 ERROR   \n 9 UNITED STATES 00000  1995 EDU0101     43993459 ERROR   \n10 UNITED STATES 00000  1996 EDU0101     44715737 ERROR   \n# ℹ 1,050 more rows\n\n\n\n\nGeneral Summary Function\n\nCreate a plotting function to show means of each enrollment count for years vs Division from the ‘state’ class data set.\n\n\nplot.state &lt;- function(df, value = \"count\") {\n  y &lt;- df |&gt;\n    group_by(division, year) |&gt;\n    summarise(Mean = mean(get(value), na.rm = TRUE)) |&gt;\n    filter(division != \"ERROR\")\n  \n  gg &lt;- ggplot(y, aes(x=year, y=Mean, color = division))\n  gg + geom_line()\n}\n\nplot.state(census_EDU01[[2]], value = \"count\")\n\n\n\n\n\n\n\n\n\nUsing the ‘county’ class data set, generate a plot of county enrollments. The county data to be plotted should be selectable by state, average county enrollment, ascending or descending values, and the number of counties to return.\n\n\nplot.county &lt;- function(df, var_name = \"count\", state_selection = \"NC\", top = TRUE, n = 5) {\n  y &lt;- df |&gt;\n    filter(state == paste0(\" \", state_selection)) |&gt;\n    group_by(area_name) |&gt;\n    summarise(Mean = mean(get(var_name), na.rm = TRUE)) |&gt;\n    arrange(if (top) desc(Mean) else Mean) |&gt;\n    slice_head(n = n)\n  \n  y\n}\n\nplot.county(census_EDU01[[1]], top =FALSE)\n\n# A tibble: 5 × 2\n  area_name    Mean\n  &lt;chr&gt;       &lt;dbl&gt;\n1 Tyrrell, NC  744.\n2 Hyde, NC     796.\n3 Clay, NC    1253.\n4 Graham, NC  1269.\n5 Camden, NC  1286."
  }
]